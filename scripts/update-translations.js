const fs = require('fs');
const path = require('path');

// è¯»å–skills.json
const skillsJsonPath = path.join(__dirname, '../prototype/data/skills.json');
const skillsData = JSON.parse(fs.readFileSync(skillsJsonPath, 'utf8'));

// æ‰‹åŠ¨ç¿»è¯‘æ˜ å°„è¡¨
const translations = {
  'xhs-note-creator': 'å°çº¢ä¹¦ç¬”è®°ç´ æåˆ›ä½œæŠ€èƒ½ã€‚å½“ç”¨æˆ·éœ€è¦åˆ›å»ºå°çº¢ä¹¦ç¬”è®°ç´ ææ—¶ä½¿ç”¨è¿™ä¸ªæŠ€èƒ½ã€‚æŠ€èƒ½åŒ…å«ï¼šæ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å’Œæä¾›çš„èµ„æ–™ï¼Œæ’°å†™å°çº¢ä¹¦ç¬”è®°å†…å®¹ï¼ˆæ ‡é¢˜+æ­£æ–‡ï¼‰ï¼Œç”Ÿæˆå›¾ç‰‡å¡ç‰‡ï¼ˆå°é¢+æ­£æ–‡å¡ç‰‡ï¼‰ï¼Œä»¥åŠå‘å¸ƒå°çº¢ä¹¦ç¬”è®°ã€‚',

  'pi-planning-with-files': 'å®ç°Manusé£æ ¼çš„åŸºäºæ–‡ä»¶çš„è§„åˆ’æ–¹æ³•ï¼Œç”¨äºå¤æ‚ä»»åŠ¡çš„è§„åˆ’ã€è¿›åº¦è·Ÿè¸ªå’ŒçŸ¥è¯†å­˜å‚¨ã€‚é€‚ç”¨äºå¼€å§‹å¤æ‚ä»»åŠ¡ã€å¤šæ­¥éª¤é¡¹ç›®ã€ç ”ç©¶ä»»åŠ¡ï¼Œæˆ–å½“ç”¨æˆ·æåˆ°è§„åˆ’ã€ç»„ç»‡å·¥ä½œã€è·Ÿè¸ªè¿›åº¦æˆ–éœ€è¦ç»“æ„åŒ–è¾“å‡ºæ—¶ä½¿ç”¨ã€‚',

  'pptx': 'å½“æ¶‰åŠ.pptxæ–‡ä»¶æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ï¼ŒåŒ…æ‹¬åˆ›å»ºã€ç¼–è¾‘ã€è¯»å–æˆ–åˆ†æPowerPointæ¼”ç¤ºæ–‡ç¨¿ã€‚æä¾›å®Œæ•´çš„PowerPointæ–‡ä»¶å¤„ç†èƒ½åŠ›ã€‚',

  'slack-gif-creator': 'ç”¨äºåˆ›å»ºé’ˆå¯¹Slackä¼˜åŒ–çš„åŠ¨ç”»GIFçš„çŸ¥è¯†å’Œå·¥å…·ã€‚åŒ…å«GIFåˆ›å»ºã€ä¼˜åŒ–å’ŒSlacké›†æˆçš„æœ€ä½³å®è·µã€‚',

  'theme-factory': 'ç”¨äºä¸ºartifactsæ·»åŠ ä¸»é¢˜æ ·å¼çš„å·¥å…·åŒ…ã€‚è¿™äº›artifactså¯ä»¥æ˜¯ç½‘é¡µã€åº”ç”¨ç¨‹åºæˆ–å…¶ä»–å¯è§†åŒ–ç»„ä»¶ã€‚æä¾›å¤šç§é¢„è®¾ä¸»é¢˜å’Œè‡ªå®šä¹‰é€‰é¡¹ã€‚',

  'web-artifacts-builder': 'ç”¨äºåˆ›å»ºç²¾ç»†çš„ã€å¤šç»„ä»¶çš„Claude artifactsçš„å·¥å…·å¥—ä»¶ã€‚æ”¯æŒæ„å»ºå¤æ‚çš„Webåº”ç”¨ç¨‹åºã€äº¤äº’å¼ç»„ä»¶å’Œå¯è§†åŒ–å†…å®¹ã€‚',

  'brainstorming': 'åœ¨ä»»ä½•åˆ›æ„å·¥ä½œä¹‹å‰å¿…é¡»ä½¿ç”¨æ­¤æŠ€èƒ½ - åŒ…æ‹¬åˆ›å»ºåŠŸèƒ½ã€è®¾è®¡ç³»ç»Ÿã€è§£å†³é—®é¢˜æˆ–è§„åˆ’é¡¹ç›®ã€‚æä¾›ç»“æ„åŒ–çš„å¤´è„‘é£æš´æ–¹æ³•å’Œåˆ›æ„æ¿€å‘æŠ€å·§ã€‚',

  'dispatching-parallel-agents': 'å½“é¢å¯¹2ä¸ªæˆ–æ›´å¤šå¯ä»¥ç‹¬ç«‹å¤„ç†çš„ä»»åŠ¡æ—¶ä½¿ç”¨ã€‚èƒ½å¤Ÿå¹¶è¡Œåˆ†å‘ä»»åŠ¡ç»™å¤šä¸ªä»£ç†ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚',

  'finishing-a-development-branch': 'å½“å®ç°å®Œæˆã€æ‰€æœ‰æµ‹è¯•é€šè¿‡å¹¶å‡†å¤‡åˆå¹¶æ—¶ä½¿ç”¨ã€‚æä¾›å®Œæ•´çš„å¼€å‘åˆ†æ”¯å®Œæˆæµç¨‹ï¼ŒåŒ…æ‹¬ä»£ç å®¡æŸ¥ã€æµ‹è¯•éªŒè¯å’Œåˆå¹¶å‡†å¤‡ã€‚',

  'requesting-code-review': 'åœ¨å®Œæˆä»»åŠ¡ã€å®ç°ä¸»è¦åŠŸèƒ½æˆ–åˆå¹¶å‰ä½¿ç”¨ï¼Œä»¥éªŒè¯å·¥ä½œæ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚æä¾›ä»£ç å®¡æŸ¥è¯·æ±‚çš„æœ€ä½³å®è·µå’Œæ£€æŸ¥æ¸…å•ã€‚',

  'subagent-driven-development': 'åœ¨å½“å‰ä¼šè¯ä¸­æ‰§è¡ŒåŒ…å«ç‹¬ç«‹ä»»åŠ¡çš„å®ç°è®¡åˆ’æ—¶ä½¿ç”¨ã€‚é€šè¿‡å­ä»£ç†é©±åŠ¨çš„æ–¹å¼æé«˜å¼€å‘æ•ˆç‡ã€‚',

  'systematic-debugging': 'é‡åˆ°ä»»ä½•bugã€æµ‹è¯•å¤±è´¥æˆ–æ„å¤–è¡Œä¸ºæ—¶ä½¿ç”¨ï¼Œåœ¨æå‡ºä¿®å¤æ–¹æ¡ˆä¹‹å‰è¿›è¡Œç³»ç»ŸåŒ–è°ƒè¯•ã€‚æä¾›ç»“æ„åŒ–çš„è°ƒè¯•æ–¹æ³•å’Œé—®é¢˜è¯Šæ–­æµç¨‹ã€‚',

  'test-driven-development': 'åœ¨å®ç°ä»»ä½•åŠŸèƒ½æˆ–bugä¿®å¤æ—¶ä½¿ç”¨ï¼Œåœ¨ç¼–å†™å®ç°ä»£ç ä¹‹å‰å…ˆç¼–å†™æµ‹è¯•ã€‚éµå¾ªæµ‹è¯•é©±åŠ¨å¼€å‘ï¼ˆTDDï¼‰çš„æœ€ä½³å®è·µã€‚',

  'using-git-worktrees': 'åœ¨å¼€å§‹éœ€è¦ä¸å½“å‰å·¥ä½œç©ºé—´éš”ç¦»çš„åŠŸèƒ½å¼€å‘æ—¶ä½¿ç”¨ï¼Œæˆ–åœ¨æ‰§è¡Œå®ç°è®¡åˆ’ä¹‹å‰ä½¿ç”¨ - åˆ›å»ºå…·æœ‰æ™ºèƒ½ç›®å½•é€‰æ‹©å’Œå®‰å…¨éªŒè¯çš„éš”ç¦»gitå·¥ä½œæ ‘ã€‚',

  'using-superpowers': 'åœ¨å¼€å§‹ä»»ä½•å¯¹è¯æ—¶ä½¿ç”¨ - å»ºç«‹å¦‚ä½•æŸ¥æ‰¾å’Œä½¿ç”¨superpowersæŠ€èƒ½é›†çš„æ–¹æ³•ã€‚æä¾›superpowersåŠŸèƒ½çš„å®Œæ•´æŒ‡å—å’Œä½¿ç”¨è¯´æ˜ã€‚',

  'verification-before-completion': 'åœ¨å£°ç§°å·¥ä½œå®Œæˆã€ä¿®å¤æˆ–æµ‹è¯•é€šè¿‡ä¹‹å‰ä½¿ç”¨ã€‚æä¾›å®Œæˆå‰çš„éªŒè¯æ£€æŸ¥æ¸…å•ï¼Œç¡®ä¿å·¥ä½œè´¨é‡ã€‚',

  'writing-plans': 'å½“æœ‰å¤šæ­¥éª¤ä»»åŠ¡çš„è§„èŒƒæˆ–éœ€æ±‚æ—¶ä½¿ç”¨ã€‚æä¾›ç»“æ„åŒ–çš„è®¡åˆ’ç¼–å†™æ–¹æ³•ï¼ŒåŒ…æ‹¬ä»»åŠ¡åˆ†è§£ã€ä¾èµ–å…³ç³»åˆ†æå’Œæ—¶é—´ä¼°ç®—ã€‚',

  'writing-skills': 'åœ¨åˆ›å»ºæ–°æŠ€èƒ½ã€ç¼–è¾‘ç°æœ‰æŠ€èƒ½æˆ–éªŒè¯æŠ€èƒ½è´¨é‡æ—¶ä½¿ç”¨ã€‚æä¾›æŠ€èƒ½ç¼–å†™çš„æœ€ä½³å®è·µã€æ¨¡æ¿å’Œè´¨é‡æ£€æŸ¥æ ‡å‡†ã€‚'
};

// ä¸»å‡½æ•°
function main() {
  console.log('å¼€å§‹æ›´æ–°æ–°skillsçš„ä¸­æ–‡æè¿°...\n');

  let updatedCount = 0;

  // éå†æ‰€æœ‰skills
  skillsData.skills.forEach(skill => {
    // å¦‚æœæ˜¯æ–°skillä¸”æœ‰ç¿»è¯‘
    if (skill.isNew && translations[skill.id]) {
      console.log(`æ›´æ–°: ${skill.name}`);
      console.log(`  åŸæ–‡: ${skill.description.substring(0, 50)}...`);
      console.log(`  è¯‘æ–‡: ${translations[skill.id].substring(0, 50)}...`);

      skill.descriptionCn = translations[skill.id];
      updatedCount++;
    }
  });

  // ä¿å­˜æ›´æ–°åçš„æ•°æ®
  if (updatedCount > 0) {
    fs.writeFileSync(skillsJsonPath, JSON.stringify(skillsData, null, 2), 'utf8');
    console.log(`\nâœ… æˆåŠŸæ›´æ–° ${updatedCount} ä¸ªskillsçš„ä¸­æ–‡æè¿°`);
    console.log(`ğŸ“ å·²ä¿å­˜åˆ°: ${skillsJsonPath}`);
  } else {
    console.log('\nâš ï¸  æ²¡æœ‰æ‰¾åˆ°éœ€è¦æ›´æ–°çš„skills');
  }
}

main();
